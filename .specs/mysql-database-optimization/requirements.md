# MySQL数据库优化 Requirements

## What we need
分析代码中的数据库连接方式，当环境变量MYSQL_DB设置了值时，希望始终操作这个指定的数据库，而不是用户具有所有权限的数据库。需要优化代码以确保数据库连接的一致性和安全性。

## Input & Output
**Input**:
- 环境变量 MYSQL_DB (可选的数据库名称)
- SQL查询语句
- 数据库连接配置 (host, port, user, password等)

**Output**:
- 优化后的数据库连接逻辑
- 确保当MYSQL_DB设置时始终操作指定数据库
- 保持现有权限控制和安全机制

## Success criteria
- [ ] 当MYSQL_DB环境变量设置时，所有操作都限制在指定数据库内
- [ ] 修复跨数据库访问的安全风险
- [ ] 保持现有权限控制机制不变
- [ ] 确保多数据库模式(multi-DB mode)的正常工作
- [ ] 测试验证各种场景下的数据库隔离性

## Edge cases
- MYSQL_DB设置但用户尝试访问其他数据库：拒绝访问并提供明确的错误信息
- SQL中包含USE语句切换数据库：当MYSQL_DB设置时应该被阻止或忽略
- 多数据库模式下的操作：确保不影响现有的多数据库功能
- 权限验证逻辑：保持现有的schema级别权限控制
- 连接池管理：确保数据库连接的稳定性和复用性